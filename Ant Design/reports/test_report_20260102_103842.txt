================================================================================
TEST EXECUTION REPORT
================================================================================

Start Time: 2026-01-02 10:32:59
End Time: 2026-01-02 10:38:42
Duration: 0:05:43.555607

TOTAL TESTS: 2
PASSED: 1
FAILED: 1
SKIPPED: 0

================================================================================
PASSED TESTS:
================================================================================
1. test_admin_can_successfully_log_in
   File: ..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\pytest_bdd\scenario.py
   Line: 266
   Duration: 70.51s

================================================================================
FAILED TESTS:
================================================================================
1. test_admin_can_create_a_new_firm_with_owner
   File: ..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\pytest_bdd\scenario.py
   Line: 266
   Duration: 270.57s
   Error:
fixturefunc = <function step_click_button_generic at 0x0000021F86B5B1A0>
request = <FixtureRequest for <Function test_admin_can_create_a_new_firm_with_owner>>
kwargs = {'button_text': 'Create', 'context': <conftest.context.<locals>.Context object at 0x0000021F871D1DC0>}

    def call_fixture_func(
        fixturefunc: "_FixtureFunc[FixtureValue]", request: FixtureRequest, kwargs
    ) -> FixtureValue:
        if is_generator(fixturefunc):
            fixturefunc = cast(
                Callable[..., Generator[FixtureValue, None, None]], fixturefunc
            )
            generator = fixturefunc(**kwargs)
            try:
                fixture_result = next(generator)
            except StopIteration:
                raise ValueError(f"{request.fixturename} did not yield a value") from None
            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)
            request.addfinalizer(finalizer)
        else:
            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)
>           fixture_result = fixturefunc(**kwargs)

..\..\..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\_pytest\fixtures.py:902: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

context = <conftest.context.<locals>.Context object at 0x0000021F871D1DC0>, button_text = 'Create'

    @when(parsers.parse('I click the "{button_text}" button'))
    @when(parsers.parse('I click "{button_text}" button'))
    @when(parsers.parse('I click "{button_text}"'))
    @then(parsers.parse('I click the "{button_text}" button'))
    @then(parsers.parse('I click "{button_text}" button'))
    @then(parsers.parse('I click "{button_text}"'))
    @then(parsers.parse('then i click "{button_text}" button'))
    @then(parsers.parse('then I click "{button_text}" button'))
    @then(parsers.parse('And then i click "{button_text}" button'))
    @then(parsers.parse('And then I click "{button_text}" button'))
    def step_click_button_generic(context, button_text):
        """
        Generic button click step that handles all button actions
        Handles patterns like:
        - "I click the Send Verification Code button"
        - "I click Send Verification Code"
        - "I click Verify or Continue button"
        Uses data-attr-id pattern discovery
        """
        print(f"   >> Clicking button: '{button_text}'")
    
        # Handle "or" patterns (e.g., "Verify or Continue")
        if ' or ' in button_text.lower():
            button_options = [opt.strip() for opt in button_text.split(' or ')]
            for option in button_options:
                context.button_clicked = context.button_handler.click_button(
                    option,
                    identifier_type='auto'
                )
                if context.button_clicked:
                    print(f"   >> Clicked button: '{option}'")
                    break
        else:
            context.button_clicked = context.button_handler.click_button(
                button_text,
                identifier_type='auto'
            )
            if not context.button_clicked:
                context.button_clicked = context.button_handler.click_button(
                    button_text,
                    identifier_type='text'
                )
    
>       assert context.button_clicked, f"Failed to click button '{button_text}'"
E       AssertionError: Failed to click button 'Create'

steps\button_steps.py:942: AssertionError

